

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>RPC 调用 &mdash; CITA 0.8 文档</title>
  

  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
    <link rel="top" title="CITA 0.8 文档" href="index.html"/>
        <link rel="next" title="智能合约指南" href="smart_contract.html"/>
        <link rel="prev" title="合约引擎（Contract Engine）" href="contract_model.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="index.html" class="icon icon-home"> CITA
          

          
          </a>

          
            
            
              <div class="version">
                0.8
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
                <p class="caption"><span class="caption-text">快速入门</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html">依赖</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html#id4">安装</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html#id5">配置</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html#id6">运行</a></li>
<li class="toctree-l1"><a class="reference internal" href="getting_started.html#id7">验证</a></li>
</ul>
<p class="caption"><span class="caption-text">主要概念</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="blockchain.html">区块链</a></li>
<li class="toctree-l1"><a class="reference internal" href="features.html">CITA</a></li>
</ul>
<p class="caption"><span class="caption-text">系统组件</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="rpc_model.html">服务网关</a></li>
<li class="toctree-l1"><a class="reference internal" href="consensus_model.html">共识</a></li>
<li class="toctree-l1"><a class="reference internal" href="chain_model.html">链（Chain）</a></li>
<li class="toctree-l1"><a class="reference internal" href="contract_model.html">合约引擎（Contract Engine）</a></li>
</ul>
<p class="caption"><span class="caption-text">使用指南</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="">RPC 调用</a></li>
<li class="toctree-l1"><a class="reference internal" href="smart_contract.html">智能合约指南</a></li>
</ul>
<p class="caption"><span class="caption-text">系统管理</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="nodes_lists.html">节点白名单管理</a></li>
<li class="toctree-l1"><a class="reference internal" href="consensus_nodes_manager.html">共识节点管理</a></li>
<li class="toctree-l1"><a class="reference internal" href="account_manager.html">账号管理</a></li>
<li class="toctree-l1"><a class="reference internal" href="quota_manager.html">配额管理</a></li>
</ul>
<p class="caption"><span class="caption-text">架构设计</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="architecture.html">系统架构</a></li>
<li class="toctree-l1"><a class="reference internal" href="consensus.html">共识</a></li>
<li class="toctree-l1"><a class="reference internal" href="transaction_process.html">交易处理</a></li>
<li class="toctree-l1"><a class="reference internal" href="view.html">视图</a></li>
</ul>
<p class="caption"><span class="caption-text">附录</span></p>
<ul>
<li class="toctree-l1"><a class="reference internal" href="faq.html">常见问题</a></li>
<li class="toctree-l1"><a class="reference internal" href="glossary.html">词汇表</a></li>
<li class="toctree-l1"><a class="reference internal" href="releases.html">版本发布说明</a></li>
<li class="toctree-l1"><a class="reference internal" href="contributing.html">贡献代码</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
        <a href="index.html">CITA</a>
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          





<div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href="index.html">Docs</a> &raquo;</li>
      
    <li>RPC 调用</li>
      <li class="wy-breadcrumbs-aside">
        
          
            <a href="_sources/rpc.txt" rel="nofollow"> View page source</a>
          
        
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="rpc">
<h1>RPC 调用<a class="headerlink" href="#rpc" title="永久链接至标题">¶</a></h1>
<p><strong>RPC模块服务命令详细介绍</strong></p>
<p>RPC是一个单独的可执行模块，可以通过以下命令选项，优化服务资源。</p>
<blockquote>
<div><ul>
<li><p class="first">&#8211;help</p>
<p>查看帮助文档信息。</p>
</li>
<li><p class="first">&#8211;jsonrpc-port</p>
<p>服务运行时监听的端口号，默认为本机的1337端口。</p>
</li>
<li><p class="first">&#8211;thread-num</p>
<p>服务运行开启的线程数量，默认开启200个线程。</p>
</li>
<li><p class="first">&#8211;sleep-duration</p>
<p>循环等待应答时每一次轮询的等待时间，默认为3000(ns)。</p>
</li>
<li><p class="first">&#8211;prof-start</p>
<p>用于性能分析，服务运行延时设定的的时间后，开始生成性能分析文件。默认是0，即不开启。</p>
</li>
<li><p class="first">&#8211;prof-duration</p>
<p>性能分析开启后的结束时间，默认是0，即不开启。需要同时开启&#8211;prof-start选项，并且需要借助性能分析工具google-perftools，快速帮助完成性能分析报告。</p>
</li>
</ul>
</div></blockquote>
<p><strong>JSON-RPC 接口</strong></p>
<p>目前，RPC模块提供以下接口，具体详细内容，可见下文介绍。</p>
<blockquote>
<div><ul class="simple">
<li>net_peerCount</li>
<li>cita_blockNumber</li>
<li>cita_sendTransaction</li>
<li>cita_getBlockByHash</li>
<li>cita_getBlockByNumber</li>
<li>cita_getTransaction</li>
<li>eth_getTransactionCount</li>
<li>eth_getCode</li>
<li>eth_getTransactionReceipt</li>
<li>eth_call</li>
</ul>
</div></blockquote>
<p>值得注意的是，以eth开头的RPC接口是为了兼容以太坊而设计的，具体接口详情可以参考 <a class="reference external" href="https://github.com/ethereum/wiki/wiki/JSON-RPC">以太坊</a> 接口说明。</p>
<p><strong>JSON-RPC 接口详细介绍</strong></p>
<p><strong>net_peerCount</strong>
当前节点连接数</p>
<dl class="docutils">
<dt>params</dt>
<dd><ul class="first last simple">
<li>无</li>
</ul>
</dd>
<dt>return</dt>
<dd><ul class="first last simple">
<li>count: 节点连接数量</li>
</ul>
</dd>
</dl>
<p>example:</p>
<div class="highlight-python"><div class="highlight"><pre>// Request
curl -X POST --data &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;net_peerCount&quot;,&quot;params&quot;:[],&quot;id&quot;:74}&#39; 127.0.0.1:1337 | jq

// Response
{
  &quot;jsonrpc&quot;: &quot;2.0&quot;,
  &quot;id&quot;: 74,
  &quot;result&quot;: &quot;0x3&quot;
}
</pre></div>
</div>
<p><strong>cita_blockNumber</strong>
返回当前块高度</p>
<dl class="docutils">
<dt>params</dt>
<dd><ul class="first last simple">
<li>无</li>
</ul>
</dd>
<dt>return</dt>
<dd><ul class="first last simple">
<li>height: 当前高度值</li>
</ul>
</dd>
</dl>
<p>example:</p>
<div class="highlight-python"><div class="highlight"><pre>// Request
curl -X POST --data &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;cita_blockNumber&quot;,&quot;params&quot;:[],&quot;id&quot;:83}&#39; 127.0.0.1:1337 | jq

// Response
{
  &quot;jsonrpc&quot;: &quot;2.0&quot;,
  &quot;id&quot;: 83,
  &quot;result&quot;: &quot;0x8&quot;
}
</pre></div>
</div>
<p><strong>cita_sendTransaction</strong>
发送交易</p>
<dl class="docutils">
<dt>params</dt>
<dd><ul class="first last simple">
<li>data: 签名的交易</li>
</ul>
</dd>
<dt>return</dt>
<dd><ul class="first last simple">
<li>state: 交易的状态</li>
<li>hash: 交易的哈希值</li>
</ul>
</dd>
</dl>
<p>example:</p>
<div class="highlight-python"><div class="highlight"><pre>// Request
curl -X POST --data &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;cita_sendTransaction&quot;,&quot;params&quot;:[&quot;0a28356230373365393233333934346235653732396534366436313866306438656466336439633334611a80040aba030a28356230373365393233333934346235653732396534366436313866306438656466336439633334611a87030a013010a08d0622fd026060604052341561000c57fe5b5b7f4f8cfde3439a1a302c21ca51eec26086efbfd940b8c0279889fc6bb6e73ecc6633604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a15b5b60fd806100806000396000f30060606040526000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806360fe47b11460445780636d4ce63c146061575bfe5b3415604b57fe5b605f60048080359060200190919050506084565b005b3415606857fe5b606e60c6565b6040518082815260200191505060405180910390f35b7fc6d8c0af6d21f291e7c359603aa97e0ed500f04db6e983b9fce75a91c6b8da6b816040518082815260200191505060405180910390a1806000819055505b50565b600060005490505b905600a165627a7a7230582079ba3769927f0f8cf4bec7ce02513b56823c8fc3f4047989951e042a9a04651900292080808080101241d51ca7a0171113478f47357a71c240bd0431f52639741a6721725de276a88d2e723b12f4bbeb1cdddea63f947ddb9db6e2667f08a03af1577c42d3c1a3dc5a7c01208080808010&quot;],&quot;id&quot;:1}&#39; 127.0.0.1:1337 | jq

// Response
{
  &quot;jsonrpc&quot;: &quot;2.0&quot;,
  &quot;id&quot;: 1,
  &quot;result&quot;: {
    &quot;hash&quot;: &quot;0xf31e32611322f410f430ef8141c2237c19dd1034eddef8dedba692ec9851799b&quot;,
    &quot;status&quot;: &quot;4:OK&quot;
  }
}
</pre></div>
</div>
<p><strong>cita_getTransaction</strong>
获取交易信息</p>
<dl class="docutils">
<dt>params</dt>
<dd><ul class="first last simple">
<li>hash: 交易哈希值</li>
</ul>
</dd>
<dt>return</dt>
<dd><ul class="first last simple">
<li>hash: 交易哈希值</li>
<li>content: 交易内容</li>
<li>blockNumber: 块高度</li>
<li>blockHash: 块哈希</li>
<li>index: 交易在块中的索引</li>
</ul>
</dd>
</dl>
<p>example:</p>
<div class="highlight-python"><div class="highlight"><pre>// Request
curl -X POST --data &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;cita_getTransaction&quot;,&quot;params&quot;:[&quot;f31e32611322f410f430ef8141c2237c19dd1034eddef8dedba692ec9851799b&quot;],&quot;id&quot;:1}&#39; 127.0.0.1:1337 | jq

// Response
{
  &quot;jsonrpc&quot;: &quot;2.0&quot;,
  &quot;id&quot;: 1,
  &quot;result&quot;: {
    &quot;hash&quot;: &quot;0xf31e32611322f410f430ef8141c2237c19dd1034eddef8dedba692ec9851799b&quot;,
    &quot;content&quot;: &quot;0x0a28356230373365393233333934346235653732396534366436313866306438656466336439633334611a80040aba030a28356230373365393233333934346235653732396534366436313866306438656466336439633334611a87030a013010a08d0622fd026060604052341561000c57fe5b5b7f4f8cfde3439a1a302c21ca51eec26086efbfd940b8c0279889fc6bb6e73ecc6633604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a15b5b60fd806100806000396000f30060606040526000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806360fe47b11460445780636d4ce63c146061575bfe5b3415604b57fe5b605f60048080359060200190919050506084565b005b3415606857fe5b606e60c6565b6040518082815260200191505060405180910390f35b7fc6d8c0af6d21f291e7c359603aa97e0ed500f04db6e983b9fce75a91c6b8da6b816040518082815260200191505060405180910390a1806000819055505b50565b600060005490505b905600a165627a7a7230582079ba3769927f0f8cf4bec7ce02513b56823c8fc3f4047989951e042a9a04651900292080808080101241d51ca7a0171113478f47357a71c240bd0431f52639741a6721725de276a88d2e723b12f4bbeb1cdddea63f947ddb9db6e2667f08a03af1577c42d3c1a3dc5a7c01208080808010&quot;,
    &quot;blockNumber&quot;: &quot;0x5b&quot;,
    &quot;blockHash&quot;: &quot;0xc68eb999432bcc0712d1b4a1d03c6eb10a27ea0fe34e8f60cb3e02d8ccbcda8d&quot;,
    &quot;index&quot;: &quot;0x0&quot;
  }
}
</pre></div>
</div>
<p><strong>cita_getBlockByHash</strong>
根据块hash查询块的信息</p>
<dl class="docutils">
<dt>params</dt>
<dd><ul class="first last simple">
<li>hash: 32 bytes, 块的哈希值</li>
<li>boolean: 是否返回交易信息(true: 返回详细交易列表，false: 只返回交易hash)</li>
</ul>
</dd>
<dt>return</dt>
<dd><ul class="first last simple">
<li>object: 块中的具体信息</li>
</ul>
</dd>
</dl>
<p>example:</p>
<div class="highlight-python"><div class="highlight"><pre>// Request
curl -X POST --data &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;cita_getBlockByHash&quot;,&quot;params&quot;:[&quot;2f3853b7d3bb3d6bc4bb2103b645aae2b8145125340018209184c7709e04dbc3&quot;, true],&quot;id&quot;:1}&#39; 127.0.0.1:1337 | jq

// Response
{
  &quot;jsonrpc&quot;: &quot;2.0&quot;,
  &quot;id&quot;: 1,
  &quot;result&quot;: {
    &quot;version&quot;: 0,
    &quot;hash&quot;: &quot;0x5038c222d460c32fd06df36d58bb7cf5c368a55e207a46ecb18695451bfe4069&quot;,
    &quot;header&quot;: {
      &quot;timestamp&quot;: 1499756200950,
      &quot;prevHash&quot;: &quot;0xb28ec1911d375350664b9673a61d952e9a748f3e63606f1440f313c4911fde58&quot;,
      &quot;proof&quot;: {
        &quot;proposal&quot;: &quot;0x0f25d396361c7d54bb16389f6a14bf95207915f91d180d382093e19adfc4133b&quot;,
        &quot;height&quot;: 902,
        &quot;round&quot;: 0,
        &quot;commits&quot;: {
          &quot;0x2b027dacd33a41ddb09e21805778f19951776ed5&quot;: &quot;0x1532c58faedf9e103dd84aa6aacbd2121aa3a8102faa506e7e152fb10e45bafd31b1c3d372cf5d42f8b27a8bfea112ae194de76d99206f73837ad8c30267e6a501&quot;,
          &quot;0x2d74a106464fbdf94e47bb28605a1aa244ab7788&quot;: &quot;0x2ec53371cee732d59d23a58cf6cf53d818fb906fdeb5b0521a3a4cdbb75cf29658a1ff5fa95e4dc71563cbed10070c68e2eec0f812fa3be8e019b6df6e9ea66201&quot;,
          &quot;0x3efd4959af72e1214ab83caa0f04a0cc3e54d383&quot;: &quot;0xb051f0cc41bc3caed472d3c7a35e06d805e8f6d15ccb3efc257d71ee96932c5877a8e52fc29cb3bef73e0edbad62c617c4dd16763709b2604ab8b1db2d87736301&quot;,
          &quot;0x5223818f7096520bfad68ce3d5ac959267dbc45f&quot;: &quot;0x1cf6f8dc9654d461a317db199de0ed0d2d008762833b3358e269ceb3c412b60b3f1a2bd08f969e0dc1c9ebe1a0710002f853438a6ef3ea048de9b4e67387827400&quot;
        }
      },
      &quot;commit&quot;: {
        &quot;stateRoot&quot;: &quot;0xe29266e5574bc0c848b513d36403d4da71f99f328d3324e8d3134809c33d4fb4&quot;,
        &quot;transactionsRoot&quot;: &quot;0xf31e32611322f410f430ef8141c2237c19dd1034eddef8dedba692ec9851799b&quot;,
        &quot;receiptsRoot&quot;: &quot;0x9646cf2572734b4b13fe1616446ab2658e208cfdbaf25e47ebea9b6327e10c5b&quot;,
        &quot;gasUsed&quot;: &quot;0x0&quot;
      },
      &quot;height&quot;: &quot;0x387&quot;
    },
    &quot;body&quot;: {
      &quot;transactions&quot;: [
        {
          &quot;hash&quot;: &quot;0xf31e32611322f410f430ef8141c2237c19dd1034eddef8dedba692ec9851799b&quot;,
          &quot;content&quot;: &quot;0x0a28356230373365393233333934346235653732396534366436313866306438656466336439633334611a80040aba030a28356230373365393233333934346235653732396534366436313866306438656466336439633334611a87030a013010a08d0622fd026060604052341561000c57fe5b5b7f4f8cfde3439a1a302c21ca51eec26086efbfd940b8c0279889fc6bb6e73ecc6633604051808273ffffffffffffffffffffffffffffffffffffffff1673ffffffffffffffffffffffffffffffffffffffff16815260200191505060405180910390a15b5b60fd806100806000396000f30060606040526000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806360fe47b11460445780636d4ce63c146061575bfe5b3415604b57fe5b605f60048080359060200190919050506084565b005b3415606857fe5b606e60c6565b6040518082815260200191505060405180910390f35b7fc6d8c0af6d21f291e7c359603aa97e0ed500f04db6e983b9fce75a91c6b8da6b816040518082815260200191505060405180910390a1806000819055505b50565b600060005490505b905600a165627a7a7230582079ba3769927f0f8cf4bec7ce02513b56823c8fc3f4047989951e042a9a04651900292080808080101241d51ca7a0171113478f47357a71c240bd0431f52639741a6721725de276a88d2e723b12f4bbeb1cdddea63f947ddb9db6e2667f08a03af1577c42d3c1a3dc5a7c01208080808010&quot;
        }
      ]
    }
  }
}
</pre></div>
</div>
<p><strong>cita_getBlockByNumber</strong>
根据块高度查询块信息</p>
<dl class="docutils">
<dt>params</dt>
<dd><ul class="first last simple">
<li>quantity: 块高度</li>
<li>boolean: 是否返回交易信息(true: 返回详细交易列表 false: 只返回交易hash)</li>
</ul>
</dd>
<dt>return</dt>
<dd><ul class="first last simple">
<li>object: 块中的具体信息</li>
</ul>
</dd>
</dl>
<p>example:</p>
<div class="highlight-python"><div class="highlight"><pre>// Request
curl -X POST --data &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;cita_getBlockByNumber&quot;,&quot;params&quot;:[&quot;0xF9&quot;, true],&quot;id&quot;:1}&#39; 127.0.0.1:1337 | jq
或者
curl -X POST --data &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;cita_getBlockByNumber&quot;,&quot;params&quot;:[&quot;249&quot;, true],&quot;id&quot;:1}&#39; 127.0.0.1:1337 | jq
或者
curl -X POST --data &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;cita_getBlockByNumber&quot;,&quot;params&quot;:[249, true],&quot;id&quot;:1}&#39; 127.0.0.1:1337 | jq
</pre></div>
</div>
<p><strong>eth_getTransactionReceipt</strong>
获取交易凭证</p>
<dl class="docutils">
<dt>params</dt>
<dd><ul class="first last simple">
<li>hash: 交易哈希值</li>
</ul>
</dd>
<dt>return</dt>
<dd><ul class="first last simple">
<li>object: 凭证信息</li>
</ul>
</dd>
</dl>
<p>example:</p>
<div class="highlight-python"><div class="highlight"><pre>// Request
curl -X POST --data &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;eth_getTransactionReceipt&quot;,&quot;params&quot;:[&quot;f31e32611322f410f430ef8141c2237c19dd1034eddef8dedba692ec9851799b&quot;],&quot;id&quot;:1}&#39; 127.0.0.1:1337 | jq

// reuslt
{
  &quot;jsonrpc&quot;: &quot;2.0&quot;,
  &quot;id&quot;: 1,
  &quot;result&quot;: {
    &quot;transactionHash&quot;: &quot;0xf31e32611322f410f430ef8141c2237c19dd1034eddef8dedba692ec9851799b&quot;,
    &quot;transactionIndex&quot;: &quot;0x0&quot;,
    &quot;blockHash&quot;: &quot;0xc68eb999432bcc0712d1b4a1d03c6eb10a27ea0fe34e8f60cb3e02d8ccbcda8d&quot;,
    &quot;blockNumber&quot;: &quot;0x5b&quot;,
    &quot;cumulativeGasUsed&quot;: &quot;0xca9d&quot;,
    &quot;gasUsed&quot;: &quot;0xca9d&quot;,
    &quot;contractAddress&quot;: &quot;0xea4f6bc98b456ef085da5c424db710489848cab5&quot;,
    &quot;logs&quot;: [
      {
        &quot;address&quot;: &quot;0xea4f6bc98b456ef085da5c424db710489848cab5&quot;,
        &quot;topics&quot;: [
          &quot;0x4f8cfde3439a1a302c21ca51eec26086efbfd940b8c0279889fc6bb6e73ecc66&quot;
        ],
        &quot;data&quot;: &quot;0x0000000000000000000000005b073e9233944b5e729e46d618f0d8edf3d9c34a&quot;,
        &quot;blockHash&quot;: &quot;0xc68eb999432bcc0712d1b4a1d03c6eb10a27ea0fe34e8f60cb3e02d8ccbcda8d&quot;,
        &quot;blockNumber&quot;: &quot;0x5b&quot;,
        &quot;transactionHash&quot;: &quot;0xf31e32611322f410f430ef8141c2237c19dd1034eddef8dedba692ec9851799b&quot;,
        &quot;transactionIndex&quot;: &quot;0x0&quot;,
        &quot;logIndex&quot;: &quot;0x0&quot;,
        &quot;transactionLogIndex&quot;: &quot;0x0&quot;
      }
    ],
    &quot;root&quot;: &quot;0xe29266e5574bc0c848b513d36403d4da71f99f328d3324e8d3134809c33d4fb4&quot;,
    &quot;logsBloom&quot;: &quot;0x00000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000200000000000000000010000000000001000000000000000000000000000000000000000000000010000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000&quot;
  }
}
</pre></div>
</div>
<p><strong>eth_getTransactionCount</strong>
获取交易数</p>
<dl class="docutils">
<dt>param</dt>
<dd><ul class="first last simple">
<li>address: 账户地址</li>
<li>height: quantity|tag, (可选, 默认: &#8220;latest&#8221;) 高度值或者 &#8220;latest&#8221; 或者 &#8220;earliest&#8221;</li>
</ul>
</dd>
<dt>return</dt>
<dd><ul class="first last simple">
<li>count: 交易个数</li>
</ul>
</dd>
</dl>
<p>example:</p>
<div class="highlight-python"><div class="highlight"><pre>// Request
curl -X POST --data &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;eth_getTransactionCount&quot;,&quot;params&quot;:[&quot;5b073e9233944b5e729e46d618f0d8edf3d9c34a&quot;,&quot;0x5b&quot;],&quot;id&quot;:1}&#39; 127.0.0.1:1337 | jq

// reslut
{
  &quot;jsonrpc&quot;: &quot;2.0&quot;,
  &quot;id&quot;: 1,
  &quot;result&quot;: &quot;0x1&quot;
}
</pre></div>
</div>
<p><strong>eth_getCode</strong>
查看合约信息</p>
<dl class="docutils">
<dt>params</dt>
<dd><ul class="first last simple">
<li>address: 合约的地址</li>
</ul>
</dd>
<dt>return</dt>
<dd><ul class="first last simple">
<li>object: 合约信息</li>
</ul>
</dd>
</dl>
<div class="highlight-python"><div class="highlight"><pre>// Request
curl -X POST --data &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;eth_getCode&quot;,&quot;params&quot;:[&quot;ea4f6bc98b456ef085da5c424db710489848cab5&quot;,&quot;0x5b&quot;],&quot;id&quot;:1}&#39; 127.0.0.1:1337 | jq

// Response
{
  &quot;jsonrpc&quot;: &quot;2.0&quot;,
  &quot;id&quot;: 1,
  &quot;result&quot;: &quot;0x60606040526000357c0100000000000000000000000000000000000000000000000000000000900463ffffffff16806360fe47b11460445780636d4ce63c146061575bfe5b3415604b57fe5b605f60048080359060200190919050506084565b005b3415606857fe5b606e60c6565b6040518082815260200191505060405180910390f35b7fc6d8c0af6d21f291e7c359603aa97e0ed500f04db6e983b9fce75a91c6b8da6b816040518082815260200191505060405180910390a1806000819055505b50565b600060005490505b905600a165627a7a7230582079ba3769927f0f8cf4bec7ce02513b56823c8fc3f4047989951e042a9a0465190029&quot;
}
</pre></div>
</div>
<p><strong>eth_getLogs</strong>
根据Topic查询logs。</p>
<dl class="docutils">
<dt>params</dt>
<dd><ul class="first simple">
<li>object</li>
</ul>
<blockquote class="last">
<div><ul class="simple">
<li>fromBlock: quantity|tag, (可选, 默认: &#8220;latest&#8221;) 高度值或者 &#8220;latest&#8221; 或者 &#8220;earliest&#8221;</li>
<li>toBlock: quantity|tag, (可选, 默认: &#8220;latest&#8221;) 高度值或者 &#8220;latest&#8221; 或者 &#8220;earliest&#8221;</li>
<li>address: data|array, 20 bytes,（可选）合约地址或者合约地址列表</li>
<li>topics: array of data, (可选) 过滤条件，关于topics构造，可以参考 <a class="reference external" href="https://github.com/ethereum/wiki/wiki/JSON-RPC#eth_newfilter">以太坊</a></li>
</ul>
</div></blockquote>
</dd>
<dt>return</dt>
<dd><ul class="first last simple">
<li>object: 日志信息</li>
</ul>
</dd>
</dl>
<p>example:</p>
<div class="highlight-python"><div class="highlight"><pre>// Request
curl -X POST --data &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;eth_getLogs&quot;,&quot;params&quot;:[{&quot;topics&quot;:[&quot;0x8fb1356be6b2a4e49ee94447eb9dcb8783f51c41dcddfe7919f945017d163bf3&quot;],&quot;fromBlock&quot;: 0}],&quot;id&quot;:74}&#39; 127.0.0.1:1337 | jq

// Response
{
    &quot;jsonrpc&quot;:&quot;2.0&quot;,
    &quot;id&quot;:74,
    &quot;result&quot;:[
        {
            &quot;address&quot;:&quot;0xea4f6bc98b456ef085da5c424db710489848cab5&quot;,
            &quot;topics&quot;:[
                &quot;0x8fb1356be6b2a4e49ee94447eb9dcb8783f51c41dcddfe7919f945017d163bf3&quot;
            ],
            &quot;data&quot;:&quot;0x0000000000000000000000005b073e9233944b5e729e46d618f0d8edf3d9c34a0000000000000000000000000000000000000000000000000000000000000064&quot;,
            &quot;blockHash&quot;:&quot;0x3e83b74560860344f4c48d7b8089a18173aecd96b6b2148653c61b5d3f559764&quot;,
            &quot;blockNumber&quot;:&quot;0x4&quot;,
            &quot;transactionHash&quot;:&quot;0xb38e5b6572b2613cab8088f93e6835576209f2b796104779b4a43fa5adc737af&quot;,
            &quot;transactionIndex&quot;:&quot;0x0&quot;,
            &quot;logIndex&quot;:&quot;0x0&quot;,
            &quot;transactionLogIndex&quot;:&quot;0x0&quot;
        }
    ]
}
</pre></div>
</div>
<p><strong>eth_call</strong>
合约接口调用</p>
<dl class="docutils">
<dt>params</dt>
<dd><ul class="first simple">
<li>Object: 合约调用对象</li>
</ul>
<blockquote class="last">
<div><ul class="simple">
<li>from: DATA, 20 Bytes 交易发送方</li>
<li>to:   DATA, 20 Bytes 交易接收方</li>
<li>data: DATA, (可选)　经过签名的数据</li>
<li>quantity: 块高度</li>
</ul>
</div></blockquote>
</dd>
<dt>return</dt>
<dd><ul class="first last simple">
<li>hash: 交易哈希值</li>
</ul>
</dd>
</dl>
<p>example:</p>
<div class="highlight-python"><div class="highlight"><pre>// Request
curl -X POST --data &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;eth_call&quot;,&quot;params&quot;:[{&quot;from&quot;:&quot;0xca35b7d915458ef540ade6068dfe2f44e8fa733c&quot;,&quot;to&quot;:&quot;0xea4f6bc98b456ef085da5c424db710489848cab5&quot;,&quot;data&quot;:&quot;0x6d4ce63c&quot;}, 6],&quot;id&quot;:2} 127.0.0.1:1337 | jq

// Response
{
  &quot;jsonrpc&quot;: &quot;2.0&quot;,
  &quot;id&quot;: 2,
  &quot;result&quot;: &quot;0x0000000000000000000000000000000000000000000000000000000000000064&quot;
}
</pre></div>
</div>
<p><strong>RPC错误返回码和错误介绍</strong></p>
<table border="1" class="docutils">
<colgroup>
<col width="51%" />
<col width="49%" />
</colgroup>
<thead valign="bottom">
<tr class="row-odd"><th class="head">错误码</th>
<th class="head">错误消息</th>
</tr>
</thead>
<tbody valign="top">
<tr class="row-even"><td>-32700</td>
<td>解析错误</td>
</tr>
<tr class="row-odd"><td>-32600</td>
<td>请求错误</td>
</tr>
<tr class="row-even"><td>-32601</td>
<td>请求服务方法错误</td>
</tr>
<tr class="row-odd"><td>-32602</td>
<td>非法参数</td>
</tr>
<tr class="row-even"><td>-32603</td>
<td>网络错误</td>
</tr>
<tr class="row-odd"><td>-32000 to -32099</td>
<td>自定义服务错误</td>
</tr>
</tbody>
</table>
<p><strong>错误示例</strong></p>
<div class="highlight-python"><div class="highlight"><pre>// 应发送POST请求，而不是GET请求
curl -X GET -d &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;cita_blockNumber&quot;,&quot;params&quot;:[]}&#39; 127.0.0.1:1337 | jq

{
  &quot;jsonrpc&quot;: null,
  &quot;id&quot;: null,
  &quot;error&quot;: {
    &quot;code&quot;: -32600,
    &quot;message&quot;: &quot;Invalid request&quot;
  }
}

// hash值没有前缀0x
curl -X POST -d &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;cita_getTransaction&quot;,&quot;params&quot;:[&quot;0x0063187e6a84ae731cf9&quot;],&quot;id&quot;:2}&#39; 127.0.0.1:1337 | jq

{
  &quot;jsonrpc&quot;: null,
  &quot;id&quot;: null,
  &quot;error&quot;: {
    &quot;code&quot;: -32602,
    &quot;message&quot;: &quot;param is not hash&quot;
  }
}

// 调用方法错误
curl -X POST --data &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;peerCount&quot;,&quot;params&quot;:[],&quot;id&quot;:74}&#39; 127.0.0.1:1337 | jq

{
  &quot;jsonrpc&quot;: null,
  &quot;id&quot;: null,
  &quot;error&quot;: {
    &quot;code&quot;: -32601,
    &quot;message&quot;: &quot;Method not found&quot;
  }
}

// 交易个数为０或者地址不正确
curl -X POST --data &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;eth_getTransactionCount&quot;,&quot;params&quot;:[&quot;5b073e9233944b5e729e46d618f0d8edf3d9c342&quot;,2],&quot;id&quot;:1}&#39; 127.0.0.1:1337 | jq

{
  &quot;jsonrpc&quot;: &quot;2.0&quot;,
  &quot;id&quot;: 1,
  &quot;result&quot;: &quot;0x0&quot;
}

// 没有部署合约
curl -X POST --data &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;eth_getCode&quot;,&quot;params&quot;:[&quot;ea4f6bc98b456ef085da5c424db710489848cab9&quot;,35],&quot;id&quot;:1}&#39; 127.0.0.1:1337 | jq

{
  &quot;jsonrpc&quot;: &quot;2.0&quot;,
  &quot;id&quot;: 1,
  &quot;result&quot;: null
}

// 高度未达到
curl -X POST -d &#39;{&quot;jsonrpc&quot;:&quot;2.0&quot;,&quot;method&quot;:&quot;cita_getBlockByNumber&quot;,&quot;params&quot;:[99999,true],&quot;id&quot;:2}&#39; 127.0.0.1:1337 | jq

{
  &quot;jsonrpc&quot;: &quot;2.0&quot;,
  &quot;id&quot;: 2,
  &quot;result&quot;: null
}
</pre></div>
</div>
</div>


           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="smart_contract.html" class="btn btn-neutral float-right" title="智能合约指南" accesskey="n">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="contract_model.html" class="btn btn-neutral" title="合约引擎（Contract Engine）" accesskey="p"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; 版权所有 2017, Cryptape.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0.8',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="_static/translations.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>